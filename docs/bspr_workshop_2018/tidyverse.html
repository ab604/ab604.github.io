<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 2 Getting started in R and the tidyverse | Data Science Workshop</title>
  <meta name="description" content="Lessons for the BSPR 2018 Data Science Workshop">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 2 Getting started in R and the tidyverse | Data Science Workshop" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Lessons for the BSPR 2018 Data Science Workshop" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Getting started in R and the tidyverse | Data Science Workshop" />
  
  <meta name="twitter:description" content="Lessons for the BSPR 2018 Data Science Workshop" />
  

<meta name="author" content="Alistair Bailey">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="intro.html">
<link rel="next" href="import.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#requirements"><i class="fa fa-check"></i>Requirements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r-rstudio"><i class="fa fa-check"></i><b>1.1</b> What are R and RStudio?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#environments"><i class="fa fa-check"></i><b>1.1.1</b> Environments</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#why-learn-r-or-any-language"><i class="fa fa-check"></i><b>1.2</b> Why learn R, or any language ?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#finding-your-way-around-rstudio"><i class="fa fa-check"></i><b>1.3</b> Finding your way around RStudio</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#what-is-real"><i class="fa fa-check"></i><b>1.3.1</b> What is real?</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#where-am-i"><i class="fa fa-check"></i><b>1.4</b> Where am I?</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#r-projects"><i class="fa fa-check"></i><b>1.5</b> R projects</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#names"><i class="fa fa-check"></i><b>1.6</b> Naming things</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#seeking-help"><i class="fa fa-check"></i><b>1.7</b> Seeking help</a><ul>
<li class="chapter" data-level="1.7.1" data-path="intro.html"><a href="intro.html#asking-for-help"><i class="fa fa-check"></i><b>1.7.1</b> Asking for help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>2</b> Getting started in R and the tidyverse</a><ul>
<li class="chapter" data-level="2.1" data-path="tidyverse.html"><a href="tidyverse.html#the-tidyverse-and-tidy-data"><i class="fa fa-check"></i><b>2.1</b> The tidyverse and tidy data</a></li>
<li class="chapter" data-level="2.2" data-path="tidyverse.html"><a href="tidyverse.html#data-visualisation"><i class="fa fa-check"></i><b>2.2</b> Data visualisation</a><ul>
<li class="chapter" data-level="2.2.1" data-path="tidyverse.html"><a href="tidyverse.html#viz"><i class="fa fa-check"></i><b>2.2.1</b> Visualisations</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="tidyverse.html"><a href="tidyverse.html#workflow-basics"><i class="fa fa-check"></i><b>2.3</b> Workflow basics</a><ul>
<li class="chapter" data-level="2.3.1" data-path="tidyverse.html"><a href="tidyverse.html#assigning-objects"><i class="fa fa-check"></i><b>2.3.1</b> Assigning objects</a></li>
<li class="chapter" data-level="2.3.2" data-path="tidyverse.html"><a href="tidyverse.html#function-anatomy"><i class="fa fa-check"></i><b>2.3.2</b> Function anatomy</a></li>
<li class="chapter" data-level="2.3.3" data-path="tidyverse.html"><a href="tidyverse.html#atomics"><i class="fa fa-check"></i><b>2.3.3</b> Atomic vectors</a></li>
<li class="chapter" data-level="2.3.4" data-path="tidyverse.html"><a href="tidyverse.html#attributes"><i class="fa fa-check"></i><b>2.3.4</b> Attributes</a></li>
<li class="chapter" data-level="2.3.5" data-path="tidyverse.html"><a href="tidyverse.html#factors"><i class="fa fa-check"></i><b>2.3.5</b> Factors</a></li>
<li class="chapter" data-level="2.3.6" data-path="tidyverse.html"><a href="tidyverse.html#lists"><i class="fa fa-check"></i><b>2.3.6</b> Lists</a></li>
<li class="chapter" data-level="2.3.7" data-path="tidyverse.html"><a href="tidyverse.html#matrices-and-arrays"><i class="fa fa-check"></i><b>2.3.7</b> Matrices and arrays</a></li>
<li class="chapter" data-level="2.3.8" data-path="tidyverse.html"><a href="tidyverse.html#data-frames"><i class="fa fa-check"></i><b>2.3.8</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="tidyverse.html"><a href="tidyverse.html#learning-more-r"><i class="fa fa-check"></i><b>2.4</b> Learning more R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>3</b> Creating scripts and importing data</a><ul>
<li class="chapter" data-level="3.1" data-path="import.html"><a href="import.html#some-definitions"><i class="fa fa-check"></i><b>3.1</b> Some definitions</a><ul>
<li class="chapter" data-level="3.1.1" data-path="import.html"><a href="import.html#file-formats"><i class="fa fa-check"></i><b>3.1.1</b> Rectangular data and flat formats</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="import.html"><a href="import.html#using-scripts"><i class="fa fa-check"></i><b>3.2</b> Using scripts</a></li>
<li class="chapter" data-level="3.3" data-path="import.html"><a href="import.html#running-code"><i class="fa fa-check"></i><b>3.3</b> Running code</a></li>
<li class="chapter" data-level="3.4" data-path="import.html"><a href="import.html#creating-a-r-script"><i class="fa fa-check"></i><b>3.4</b> Creating a R script</a></li>
<li class="chapter" data-level="3.5" data-path="import.html"><a href="import.html#setting-up-our-environment"><i class="fa fa-check"></i><b>3.5</b> Setting up our environment</a><ul>
<li class="chapter" data-level="3.5.1" data-path="import.html"><a href="import.html#biocondutor"><i class="fa fa-check"></i><b>3.5.1</b> Bioconductor</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="import.html"><a href="import.html#importing-data"><i class="fa fa-check"></i><b>3.6</b> Importing data</a></li>
<li class="chapter" data-level="3.7" data-path="import.html"><a href="import.html#exploring-the-data"><i class="fa fa-check"></i><b>3.7</b> Exploring the data</a><ul>
<li class="chapter" data-level="3.7.1" data-path="import.html"><a href="import.html#glimpse-head-and-str"><i class="fa fa-check"></i><b>3.7.1</b> <code>glimpse</code>, <code>head</code> and <code>str</code></a></li>
<li class="chapter" data-level="3.7.2" data-path="import.html"><a href="import.html#summary-statisitics"><i class="fa fa-check"></i><b>3.7.2</b> Summary statisitics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>4</b> <code>dplyr</code> verbs and piping</a><ul>
<li class="chapter" data-level="4.1" data-path="dplyr.html"><a href="dplyr.html#pipes"><i class="fa fa-check"></i><b>4.1</b> Pipes</a></li>
<li class="chapter" data-level="4.2" data-path="dplyr.html"><a href="dplyr.html#filter"><i class="fa fa-check"></i><b>4.2</b> Filter rows</a></li>
<li class="chapter" data-level="4.3" data-path="dplyr.html"><a href="dplyr.html#arrange-rows"><i class="fa fa-check"></i><b>4.3</b> Arrange rows</a></li>
<li class="chapter" data-level="4.4" data-path="dplyr.html"><a href="dplyr.html#select-columns"><i class="fa fa-check"></i><b>4.4</b> Select columns</a></li>
<li class="chapter" data-level="4.5" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>4.5</b> Create new variables</a></li>
<li class="chapter" data-level="4.6" data-path="dplyr.html"><a href="dplyr.html#create-grouped-summaries"><i class="fa fa-check"></i><b>4.6</b> Create grouped summaries</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Transforming and visualising proteomics data</a><ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#fold-change-and-log-fold-change"><i class="fa fa-check"></i><b>5.1</b> Fold change and log-fold change</a></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#missing-values"><i class="fa fa-check"></i><b>5.2</b> Dealing with missing values</a></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#normalisation"><i class="fa fa-check"></i><b>5.3</b> Data normalization</a></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#hypothesis-testing-with-the-t-test"><i class="fa fa-check"></i><b>5.4</b> Hypothesis testing with the t-test</a></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#calculating-fold-change"><i class="fa fa-check"></i><b>5.5</b> Calculating fold change</a></li>
<li class="chapter" data-level="5.6" data-path="transform.html"><a href="transform.html#visualising-the-transformed-data"><i class="fa fa-check"></i><b>5.6</b> Visualising the transformed data</a></li>
<li class="chapter" data-level="5.7" data-path="transform.html"><a href="transform.html#volcano-plot"><i class="fa fa-check"></i><b>5.7</b> Volcano plot</a><ul>
<li class="chapter" data-level="5.7.1" data-path="transform.html"><a href="transform.html#but-which-proteins-are-the-significant-observations"><i class="fa fa-check"></i><b>5.7.1</b> But which proteins are the significant observations?</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="transform.html"><a href="transform.html#creating-a-heatmap"><i class="fa fa-check"></i><b>5.8</b> Creating a heatmap</a><ul>
<li class="chapter" data-level="5.8.1" data-path="transform.html"><a href="transform.html#calculating-similarity-and-clustering"><i class="fa fa-check"></i><b>5.8.1</b> Calculating similarity and clustering</a></li>
<li class="chapter" data-level="5.8.2" data-path="transform.html"><a href="transform.html#plotting-the-heatmap"><i class="fa fa-check"></i><b>5.8.2</b> Plotting the heatmap</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="transform.html"><a href="transform.html#venn"><i class="fa fa-check"></i><b>5.9</b> Venn diagram</a></li>
<li class="chapter" data-level="5.10" data-path="transform.html"><a href="transform.html#peptide-sequence-logos"><i class="fa fa-check"></i><b>5.10</b> Peptide sequence logos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="going-further.html"><a href="going-further.html"><i class="fa fa-check"></i><b>6</b> Going further</a><ul>
<li class="chapter" data-level="6.1" data-path="going-further.html"><a href="going-further.html#export-figs"><i class="fa fa-check"></i><b>6.1</b> Exporting figures</a></li>
<li class="chapter" data-level="6.2" data-path="going-further.html"><a href="going-further.html#exporting-data"><i class="fa fa-check"></i><b>6.2</b> Exporting data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="going-further.html"><a href="going-further.html#writing-to-a-file"><i class="fa fa-check"></i><b>6.2.1</b> Writing to a file</a></li>
<li class="chapter" data-level="6.2.2" data-path="going-further.html"><a href="going-further.html#for-r"><i class="fa fa-check"></i><b>6.2.2</b> For R</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="going-further.html"><a href="going-further.html#joining-the-r-community"><i class="fa fa-check"></i><b>6.3</b> Joining the R community</a></li>
<li class="chapter" data-level="6.4" data-path="going-further.html"><a href="going-further.html#communication-creating-reports-presentations-and-websites"><i class="fa fa-check"></i><b>6.4</b> Communication: creating reports, presentations and websites</a><ul>
<li class="chapter" data-level="6.4.1" data-path="going-further.html"><a href="going-further.html#using-bookdown-to-write-a-thesis-dissertaion"><i class="fa fa-check"></i><b>6.4.1</b> Using bookdown to write a thesis dissertaion</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="going-further.html"><a href="going-further.html#machine-learning"><i class="fa fa-check"></i><b>6.5</b> Machine Learning</a></li>
<li class="chapter" data-level="6.6" data-path="going-further.html"><a href="going-further.html#version-control"><i class="fa fa-check"></i><b>6.6</b> Version control</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Getting started in R and the tidyverse</h1>
<p>Functions are a way to automate common tasks and R comes with a set of functions
called the <code>base</code> package. We will be using some <code>base</code> functions in
Chapter <a href="transform.html#transform">5</a>, but to introduce the concept of using <a href="tidyverse.html#function-anatomy">functions</a>
we’ll begin with the <code>tidyverse</code>.</p>
<div id="the-tidyverse-and-tidy-data" class="section level2">
<h2><span class="header-section-number">2.1</span> The tidyverse and tidy data</h2>
<p>The <a href="https://www.tidyverse.org/">tidyverse</a> <span class="citation">(Wickham <a href="#ref-R-tidyverse">2017</a>)</span> is <em>“an opinionated
collection of R packages designed for data science”</em> .</p>
<p>Tidyverse packages contain functions that <em>“share an underlying design
philosophy, grammar, and data structures.”</em> It’s this philiosophy that makes
tidyverse functions and packages relatively easy to learn and use.</p>
<p>Tidy data follows three principals for tabular data as proposed in the Tidy Data
paper <a href="http://www.jstatsoft.org/v59/i10/paper" class="uri">http://www.jstatsoft.org/v59/i10/paper</a> :</p>
<ol style="list-style-type: decimal">
<li>Every variable has its own column.</li>
<li>Every observation has its own row.</li>
<li>Each value has its own cell.</li>
</ol>
<p>If our table was proteomics data then, we might have a set of variables such
as the peptide sequence, mass or length observed for a number of peptides.
Therefore each peptide would have a row with columns for peptide sequence, mass
and length with the value for each variable in separate cells, as
seen in Figure <a href="tidyverse.html#fig:tidy-prot">2.1</a>.</p>

<div class="figure" style="text-align: center"><span id="fig:tidy-prot"></span>
<img src="img/tidy_prot_data.PNG" alt="An example of tidy proteomics data" width="80%" />
<p class="caption">
Figure 2.1: An example of tidy proteomics data
</p>
</div>
<p>Often much of the work in any data analysis is getting our data into a tidy form.</p>
<p>We can’t do everything in the tidyverse, and everything we can do in the
tidyverse can be done in what is called base R or other packages, but the
motivation behind the tidyverse is to ease the pain of data manipulation.</p>
<p>With this in mind, the two tasks we are most likely to want to do
in data science are:</p>
<ol style="list-style-type: decimal">
<li>Visualise our data</li>
<li>Automate our processes.</li>
</ol>
<p>Taking our cue from <a href="http://r4ds.had.co.nz/">R4DS</a> let’s try an example.</p>
</div>
<div id="data-visualisation" class="section level2">
<h2><span class="header-section-number">2.2</span> Data visualisation</h2>
<p>The <code>ggplot2</code> package implements the <em>grammer of graphics</em>, for describing
and building graphs.</p>
<p>The motivation here is twofold:</p>
<ol style="list-style-type: decimal">
<li>To begin to grasp the grammar of graphics approach to creating plots. This will
be our first example of automating a task using a function.</li>
<li>To demonstrate how plotting is often the most useful thing we can do when
trying to understand our data.</li>
</ol>
<p>We’ll use the <code>mpg</code> dataset that comes with the tidyverse to examine
the question <em>do cars with big engines use more fuel than cars with small engines?</em></p>
<p>Try <code>?mpg</code> to learn more about the data.</p>
<ol style="list-style-type: decimal">
<li>Engine size in litres is in the <code>displ</code> column.</li>
<li>Fuel efficiency on the highway in miles per gallon is given in the <code>hwy</code> column.</li>
</ol>
<p>To create a plot of engine size <code>displ</code> (x-axis) against fuel efficiency <code>hwy</code> (y-axis) we do the following:</p>
<ol style="list-style-type: decimal">
<li>Use the <code>ggplot()</code> function to create an empty graph.</li>
<li>Provide ggplot with a first input or <strong>argument</strong> of the data (here <code>mpg</code>).</li>
<li>Then we follow the ggplot function with a <code>+</code> sign to indicate
we are going to add more code, followed by a <code>geom_point()</code> function to add a
layer of points mapping some aesthetics for the x and y axes.</li>
<li>Mapping is always paired to aesthetics <code>aes()</code>. An aesthetic is a visual
property of the objects in your plot, such a point size, shape or point colour.</li>
</ol>
<p>Therefore to plot engine size (x-axis) against fuel efficiency (y-axis) we
use the following code:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy))</code></pre>
<p><img src="bspr-workshop-2018_files/figure-html/mpg-plot-1,mpg_point_plot-1.png" width="672" /></p>
<p>This plot shows a negative relationship between engine size and fuel
efficiency.</p>
<p>Now try extending this code to include to add a <code>colour</code> aesthetic to the
the <code>aes()</code> function, let <code>colour = class</code>, <code>class</code> being the veichle type.
This should create a plot with as before but with the points coloured
according to the viechle type to expand our understanding.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">colour =</span> class))</code></pre>
<p><img src="bspr-workshop-2018_files/figure-html/mpg-plot-2-1.png" width="672" /></p>
<p>Now we can see that as we might expect, bigger cars such as SUVs tend to have
bigger engines and are also less fuel efficient, but some smaller cars such as
2-seaters also have big engines and greater fuel efficiency. Hence we have a
more nuanced view with this additional aesthetic.</p>
<p>Check out the ggplot2 documentation for all the aesthetic possibilities (and
Google for examples): <a href="http://ggplot2.tidyverse.org/reference/" class="uri">http://ggplot2.tidyverse.org/reference/</a></p>
<p>So now we have re-usable code snippet for generating plots in R:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="op">&lt;</span>DATA<span class="op">&gt;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="er">&lt;</span>GEOM_FUNCTION<span class="op">&gt;</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="op">&lt;</span>MAPPINGS<span class="op">&gt;</span>))</code></pre>
<p>Concretely, in our first example <code>&lt;DATA&gt;</code> was <code>mpg</code>, the <code>&lt;GEOM_FUNCTION&gt;</code>
was <code>geom_point()</code> and the arguments we supplies to map our aesthetics
<code>&lt;MAPPINGS&gt;</code> were <code>x = displ, y = hwy</code>.</p>
<p>As we can use this code for any tidy data set, hopefully you are beginning to
see how a small amount of code can do a lot.</p>
<div id="viz" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Visualisations</h3>
<p>Claus Wilke has written a very nice guide to visualising data using R called
<a href="http://serialmentor.com/dataviz/index.html">Fundamentals of Data Visualization</a>.</p>
</div>
</div>
<div id="workflow-basics" class="section level2">
<h2><span class="header-section-number">2.3</span> Workflow basics</h2>
<p>Let’s run through the basics of working in R to conclude this chapter.</p>
<div id="assigning-objects" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Assigning objects</h3>
<p>Objects are just a way to store data inside the R environment. We create objects using the assignment operator <code>&lt;-</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">mass_kg &lt;-<span class="st"> </span><span class="dv">55</span></code></pre>
<p>Read this as <em>“mass_kg gets value 55”</em> in your head.</p>
<p>Using <code>&lt;-</code> can be annoying to type, so use RStudio’s keyboard short cut:
Alt + - (the minus sign) to make life easier.</p>
<p>Many people ask why we use this assignment operator when we can use <code>=</code> instead?</p>
<p><a href="https://twitter.com/_colinfay/status/1006139974377443328">Colin Fay had a Twitter thread on this subject</a>,
but the reason I favour most is that it provides clarity. The arrow points in
the direction of the assigment (it is actually possible to assign in the other
direction too) and it distinguishes between creating an object in the workspace
and assigning a value inside a function.</p>
<p>Object name style is a matter of choice, but must start with a letter and can
only contain letters, numbers, <code>_</code> and <code>.</code>. We recommend using descriptive names
and using <code>_</code> between words. Some special symbols cannot be used in variable
names, so watch out for those.</p>
<p>So here we’ve used the name to indicate its value represents a mass in kilograms.
Look in your environment pane and you’ll see the <code>mass_kg</code> object
containing the (data) value 55.</p>
<p>We can inspect an object by typing it’s name:</p>
<pre class="sourceCode r"><code class="sourceCode r">mass_kg</code></pre>
<pre><code>## [1] 55</code></pre>
<p>What’s wrong here?</p>
<pre class="sourceCode r"><code class="sourceCode r">mass_KG</code></pre>
<p><code>Error: object 'mass_KG' not found</code></p>
<p>This error illustrates that typos matter, everything must be precise and <code>mass_KG</code>
is not the same as <code>mass_kg</code>. <code>mass_KG</code> doesn’t exist, hence the error.</p>
</div>
<div id="function-anatomy" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Function anatomy</h3>
<p>Functions in R are objects followed by parentheses, such as <code>library()</code>.</p>
<p>Functions have the form:</p>
<p><code>function_name(arg1 = val, arg2 = val2, ...)</code></p>
<p>The use of arguements or inputs allows us to generalise. That is to say not
just do something in a specific case, but in many cases. For example not just
make a scatter plot for the <code>mpg</code> dataset, but for any dataset of observations
that can be plotted pairwise.</p>
<p>Let’s use <code>seq()</code> to create a <strong>seq</strong>uence of numbers, and at the same time practice tab completion.</p>
<p>Start typing <code>se</code> in the console and you should see a list of functions appear,
add <code>q</code> to shorten the list, then use the up and down arrow to highlight the function
of interest <code>seq()</code> and hit Tab to select.</p>
<p>RStudio puts the cursor between the parentheses to prompt us to enter some
arguments. Here we’ll use 1 as the start and 10 as the end:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>)</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>If we left off a parentheses to close the function, then when we hit enter
we’ll see a <code>+</code> indicating RStudio is expecting further code. We either add the
missing part or press Escape to cancel the code.</p>
<p>Let’s call a function and make an assignment at the same time. Here we’ll use
the base R function <code>seq()</code> which takes three arguments: <code>from</code>, <code>to</code> and <code>by</code>.</p>
<p>Read the following code as <em>"make an object called my_sequence that stores a sequence of numbers from 2 to 20 by intervals of 2</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r">my_sequence &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">20</span>,<span class="dv">2</span>)</code></pre>
<p>This time nothing was returned to the console, but we now have an object called
<code>my_sequence</code> in our environment.</p>
<p>Can you remember how to inspect it?</p>
<p>If we want to subset elements of <code>my_sequence</code> we use
square brackets <code>[]</code>.</p>
<p>For example element five would be subset by:</p>
<pre class="sourceCode r"><code class="sourceCode r">my_sequence[<span class="dv">5</span>]</code></pre>
<pre><code>## [1] 10</code></pre>
<p>Here the number five is the index of the vector, not the value of the fifth element. The value of the fifth element is 10.</p>
<p>And returning multiple elements uses a colon <code>:</code>, like so</p>
<pre class="sourceCode r"><code class="sourceCode r">my_sequence[<span class="dv">5</span><span class="op">:</span><span class="dv">8</span>]</code></pre>
<pre><code>## [1] 10 12 14 16</code></pre>
</div>
<div id="atomics" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Atomic vectors</h3>
<p>We actually made an atomic vector already when we made <code>my_sequence</code>. We made a
a one dimensional group of numbers, in a sequence from two to twenty.</p>
<p>We’re not going to be working much with atomic vectors in this workshop,
but to make you aware of how R stores data, atomic vector types
are:</p>
<ul>
<li>Doubles: regular numbers, +ve or -ve and with or without decimal places. AKA numerics.</li>
<li>Integers: whole numbers, specified with an upper-case L, e.g. <code>int &lt;- 2L</code></li>
<li>Characters: Strings of text</li>
<li>Logicals: these store <code>TRUE</code>s and <code>FALSE</code>s which are useful for comparisons.</li>
<li>Complex: this would be a vector of numbers with imaginary terms.</li>
<li>Raw: these vectors store raw bytes of data.</li>
</ul>
<p>Let’s make a character vector and check the type:</p>
<pre class="sourceCode r"><code class="sourceCode r">cards &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ace&quot;</span>, <span class="st">&quot;king&quot;</span>, <span class="st">&quot;queen&quot;</span>, <span class="st">&quot;jack&quot;</span>, <span class="st">&quot;ten&quot;</span>)

cards</code></pre>
<pre><code>## [1] &quot;ace&quot;   &quot;king&quot;  &quot;queen&quot; &quot;jack&quot;  &quot;ten&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(cards)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="attributes" class="section level3">
<h3><span class="header-section-number">2.3.4</span> Attributes</h3>
<p>An attribute is a piece of information you can attach to an object, such as
names or dimensions. Attributes such as dimensions are added when
we create an object, but others such as names can be added.</p>
<p>Let’s look at the <code>mpg</code> data frame dimensions:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># mpg has 234 rows (observations) and 11 columns (variables)</span>
<span class="kw">dim</span>(mpg)</code></pre>
<pre><code>## [1] 234  11</code></pre>
</div>
<div id="factors" class="section level3">
<h3><span class="header-section-number">2.3.5</span> Factors</h3>
<p>Factors are Rs way of storing categorical information such as eye colour or
car type. A factor is something that can only have certain values, and can be
ordered (such as <code>low</code>,<code>medium</code>,<code>high</code>) or unordered such as types of fruit.</p>
<p>Factors are useful as they code string variables such as “red” or “blue” to integer values e.g. 1 and 2, which can be used in statistical models and when plotting, but they are confusing as they look like strings.</p>
<p><strong>Factors look like strings, but behave like integers.</strong></p>
<p>Historically R converts strings to factors when we load and create data, but
it’s often not what we want as a default. Fortunately, in the tidyverse strings
are not treated as factors by default.</p>
</div>
<div id="lists" class="section level3">
<h3><span class="header-section-number">2.3.6</span> Lists</h3>
<p>Lists also group data into one dimensional sets of data. The difference being
that list group objects instead of individual values, such as several atomic
vectors.</p>
<p>For example, let’s make a list containing a vector of numbers and a character
vector</p>
<pre class="sourceCode r"><code class="sourceCode r">list_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">110</span>,<span class="st">&quot;R&quot;</span>)

list_<span class="dv">1</span></code></pre>
<pre><code>## [[1]]
##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34
##  [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51
##  [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
##  [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85
##  [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 101 102
## [103] 103 104 105 106 107 108 109 110
## 
## [[2]]
## [1] &quot;R&quot;</code></pre>
<p>Note the double brackets to indicate the list elements, i.e. element one is the
vector of numbers and element two is a vector of a single character.</p>
<p>We won’t be working with lists in this workshop, but they are a flexible way to
store data of different types in R.</p>
<p>Accessing list elements uses double square brackets syntax, for example
<code>list_1[[1]]</code> would return the first vector in our list.</p>
<p>And to access the first element in the first vector would combine double and
single square brackets like so: <code>list_1[[1]][1]</code>.</p>
<p>Don’t worry if you find this confusing, everyone does when they first start with
R.</p>
</div>
<div id="matrices-and-arrays" class="section level3">
<h3><span class="header-section-number">2.3.7</span> Matrices and arrays</h3>
<p>Matrices store values in a two dimensional array, whilst arrays can have n
dimensions. We won’t be using these either, but they are also valid R objects.</p>
</div>
<div id="data-frames" class="section level3">
<h3><span class="header-section-number">2.3.8</span> Data frames</h3>
<p>Data frames are two dimensional versions of lists, and this is form of storing
data we are going to be using. In a data frame each atomic vector type becomes
a column, and a data frame is formed by columns of vectors of the same length.
Each column element must be of the same type, but the column types can vary.</p>
<p>Figure <a href="tidyverse.html#fig:df">2.2</a> shows an example data frame we’ll refer to as
saved as the object <code>df</code> consisting of three rows and three columns. Each
column is a different atomic data type of the same length.</p>

<div class="figure" style="text-align: center"><span id="fig:df"></span>
<img src="img/data_frame.png" alt="An example data frame df." width="80%" />
<p class="caption">
Figure 2.2: An example data frame <code>df</code>.
</p>
</div>
<p>Packages in the tidyverse create a modified form of data frame called a tibble.
You can read about tibbles <a href="http://r4ds.had.co.nz/tibbles.html">here</a>. One
advantage of tibbles is that they don’t default to treating strings as factors.
We deal with modifying data frames when we work with our example data set.</p>
<p>Sub-setting data frames can also be done with square bracket syntax, but as we
have both rows and columns, we need to provide index values for both row and
column.</p>
<p>For example <code>df[1,2]</code> means <strong>return the value of <code>df</code> row 1, column 2</strong>. This corresponds with the value <code>A</code>.</p>
<p>We can also use the colon operator to choose
several rows or columns, and by leaving the row or column blank we return all
rows or all columns.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Subset rows 1 and 2 of column 1</span>
df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dv">1</span>]

<span class="co"># Subset all rows of column 3</span>
df[,<span class="dv">3</span>]</code></pre>
<p>Again don’t worry too much about this for now, we won’t be doing to much of this
in this lesson, but it’s important to be aware of the basic syntax.</p>
</div>
</div>
<div id="learning-more-r" class="section level2">
<h2><span class="header-section-number">2.4</span> Learning more R</h2>
<p>There are many places to start, but swirl can teach you interactively, and at your own pace in RStudio.</p>
<p>Just follow the instructions via this link: <a href="http://swirlstats.com/students.html" class="uri">http://swirlstats.com/students.html</a></p>
<p><em>Hands-On Programming with R</em> by Garrett Grolemund is another great resource
for learning R.</p>
<p>Plus all the <a href="https://www.tidyverse.org/learn/">tidyverse links</a>.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-tidyverse">
<p>Wickham, Hadley. 2017. <em>Tidyverse: Easily Install and Load the ’Tidyverse’</em>. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="import.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["bspr-workshop-2018.pdf", "bspr-workshop-2018.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
